<div class="article">            <div class="inner">              <header class="article-header">                <h1 class="article-title" itemprop="name">常规数据库接口 sql.DB</h1>                                <a href="https://translate.gorm.io/project/go-gorm/zh-CN" target="_blank" rel="noopener" class="article-edit-link" title="改进此页面"><i class="fa fa-pencil"></i></a>                              </header>              <div class="article-content" itemprop="articleBody">                <html><head></head><body><p>GORM 提供了 <code>DB</code> 方法，可用于从当前 <code>*gorm.DB</code> 返回一个通用的数据库接口 <a href="https://pkg.go.dev/database/sql#DB" target="_blank" rel="noopener">*sql.DB</a></p><figure class="highlight go"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// 获取通用数据库对象 sql.DB，然后使用其提供的功能</span></span><br><span class="line">sqlDB, err := db.DB()</span><br><span class="line"></span><br><span class="line"><span class="comment">// Ping</span></span><br><span class="line">sqlDB.Ping()</span><br><span class="line"></span><br><span class="line"><span class="comment">// Close</span></span><br><span class="line">sqlDB.Close()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回数据库统计信息</span></span><br><span class="line">sqlDB.Stats()</span><br></pre></td></tr></tbody></table></figure><blockquote class="note warn"><p><strong>注意</strong> 如果底层连接的数据库不是 <code>*sql.DB</code>，它会返回错误</p></blockquote><h2 id="连接池" class="article-heading"><a href="#连接池" class="headerlink" title="连接池"></a>连接池<a class="article-anchor" href="#连接池" aria-hidden="true"></a></h2><figure class="highlight go"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// 获取通用数据库对象 sql.DB ，然后使用其提供的功能</span></span><br><span class="line">sqlDB, err := db.DB()</span><br><span class="line"></span><br><span class="line"><span class="comment">// SetMaxIdleConns 用于设置连接池中空闲连接的最大数量。</span></span><br><span class="line">sqlDB.SetMaxIdleConns(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// SetMaxOpenConns 设置打开数据库连接的最大数量。</span></span><br><span class="line">sqlDB.SetMaxOpenConns(<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// SetConnMaxLifetime 设置了连接可复用的最大时间。</span></span><br><span class="line">sqlDB.SetConnMaxLifetime(time.Hour)</span><br></pre></td></tr></tbody></table></figure></body></html>              </div>
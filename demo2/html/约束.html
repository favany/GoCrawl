<div class="article">            <div class="inner">              <header class="article-header">                <h1 class="article-title" itemprop="name">约束</h1>                                <a href="https://translate.gorm.io/project/go-gorm/zh-CN" target="_blank" rel="noopener" class="article-edit-link" title="改进此页面"><i class="fa fa-pencil"></i></a>                              </header>              <div class="article-content" itemprop="articleBody">                <html><head></head><body><p>GORM 允许通过标签创建数据库约束，约束会在通过 GORM 进行 <a href="migration.html">AutoMigrate 或创建数据表</a>时被创建。</p><h2 id="检查约束" class="article-heading"><a href="#检查约束" class="headerlink" title="检查约束"></a>检查约束<a class="article-anchor" href="#检查约束" aria-hidden="true"></a></h2><p>通过 <code>check</code> 标签创建检查约束</p><figure class="highlight go"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> UserIndex <span class="keyword">struct</span> {</span><br><span class="line">    Name  <span class="keyword">string</span> <span class="string">`gorm:"check:name_checker,name &lt;&gt; 'jinzhu'"`</span></span><br><span class="line">    Name2 <span class="keyword">string</span> <span class="string">`gorm:"check:name &lt;&gt; 'jinzhu'"`</span></span><br><span class="line">    Name3 <span class="keyword">string</span> <span class="string">`gorm:"check:,name &lt;&gt; 'jinzhu'"`</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="索引约束" class="article-heading"><a href="#索引约束" class="headerlink" title="索引约束"></a>索引约束<a class="article-anchor" href="#索引约束" aria-hidden="true"></a></h2><p>查看 <a href="indexes.html">数据库索引</a> 获取详情</p><h2 id="外键约束" class="article-heading"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束<a class="article-anchor" href="#外键约束" aria-hidden="true"></a></h2><p>GORM 会为关联创建外键约束，您可以在初始化过程中禁用此功能：</p><figure class="highlight go"><table><tbody><tr><td class="code"><pre><span class="line">db, err := gorm.Open(sqlite.Open(<span class="string">"gorm.db"</span>), &amp;gorm.Config{</span><br><span class="line">  DisableForeignKeyConstraintWhenMigrating: <span class="literal">true</span>,</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure><p>GORM 允许您通过 <code>constraint</code> 标签的 <code>OnDelete</code>、<code>OnUpdate</code> 选项设置外键约束，例如：</p><figure class="highlight go"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> {</span><br><span class="line">  gorm.Model</span><br><span class="line">  CompanyID  <span class="keyword">int</span></span><br><span class="line">  Company    Company    <span class="string">`gorm:"constraint:OnUpdate:CASCADE,OnDelete:SET NULL;"`</span></span><br><span class="line">  CreditCard CreditCard <span class="string">`gorm:"constraint:OnUpdate:CASCADE,OnDelete:SET NULL;"`</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> CreditCard <span class="keyword">struct</span> {</span><br><span class="line">  gorm.Model</span><br><span class="line">  Number <span class="keyword">string</span></span><br><span class="line">  UserID <span class="keyword">uint</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Company <span class="keyword">struct</span> {</span><br><span class="line">  ID   <span class="keyword">int</span></span><br><span class="line">  Name <span class="keyword">string</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></body></html>              </div>
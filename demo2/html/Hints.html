<div class="article">            <div class="inner">              <header class="article-header">                <h1 class="article-title" itemprop="name">Hints</h1>                                <a href="https://translate.gorm.io/project/go-gorm/zh-CN" target="_blank" rel="noopener" class="article-edit-link" title="改进此页面"><i class="fa fa-pencil"></i></a>                              </header>              <div class="article-content" itemprop="articleBody">                <html><head></head><body><p>GORM 提供了 optimizer/index/comment hint 支持</p><p><a href="https://github.com/go-gorm/hints" target="_blank" rel="noopener">https://github.com/go-gorm/hints</a></p><h2 id="Optimizer-Hints" class="article-heading"><a href="#Optimizer-Hints" class="headerlink" title="Optimizer Hints"></a>Optimizer Hints<a class="article-anchor" href="#Optimizer-Hints" aria-hidden="true"></a></h2><figure class="highlight go"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"gorm.io/hints"</span></span><br><span class="line"></span><br><span class="line">db.Clauses(hints.New(<span class="string">"hint"</span>)).Find(&amp;User{})</span><br><span class="line"><span class="comment">// SELECT * /*+ hint */ FROM `users`</span></span><br></pre></td></tr></tbody></table></figure><h2 id="Index-Hints" class="article-heading"><a href="#Index-Hints" class="headerlink" title="Index Hints"></a>Index Hints<a class="article-anchor" href="#Index-Hints" aria-hidden="true"></a></h2><figure class="highlight go"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"gorm.io/hints"</span></span><br><span class="line"></span><br><span class="line">db.Clauses(hints.UseIndex(<span class="string">"idx_user_name"</span>)).Find(&amp;User{})</span><br><span class="line"><span class="comment">// SELECT * FROM `users` USE INDEX (`idx_user_name`)</span></span><br><span class="line"></span><br><span class="line">db.Clauses(hints.ForceIndex(<span class="string">"idx_user_name"</span>, <span class="string">"idx_user_id"</span>).ForJoin()).Find(&amp;User{})</span><br><span class="line"><span class="comment">// SELECT * FROM `users` FORCE INDEX FOR JOIN (`idx_user_name`,`idx_user_id`)"</span></span><br><span class="line"></span><br><span class="line">db.Clauses(</span><br><span class="line">    hints.ForceIndex(<span class="string">"idx_user_name"</span>, <span class="string">"idx_user_id"</span>).ForOrderBy(),</span><br><span class="line">    hints.IgnoreIndex(<span class="string">"idx_user_name"</span>).ForGroupBy(),</span><br><span class="line">).Find(&amp;User{})</span><br><span class="line"><span class="comment">// SELECT * FROM `users` FORCE INDEX FOR ORDER BY (`idx_user_name`,`idx_user_id`) IGNORE INDEX FOR GROUP BY (`idx_user_name`)"</span></span><br></pre></td></tr></tbody></table></figure><h2 id="Comment-Hints" class="article-heading"><a href="#Comment-Hints" class="headerlink" title="Comment Hints"></a>Comment Hints<a class="article-anchor" href="#Comment-Hints" aria-hidden="true"></a></h2><figure class="highlight go"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"gorm.io/hints"</span></span><br><span class="line"></span><br><span class="line">db.Clauses(hints.Comment(<span class="string">"select"</span>, <span class="string">"master"</span>)).Find(&amp;User{})</span><br><span class="line"><span class="comment">// SELECT /*master*/ * FROM `users`;</span></span><br><span class="line"></span><br><span class="line">db.Clauses(hints.CommentBefore(<span class="string">"insert"</span>, <span class="string">"node2"</span>)).Create(&amp;user)</span><br><span class="line"><span class="comment">// /*node2*/ INSERT INTO `users` ...;</span></span><br><span class="line"></span><br><span class="line">db.Clauses(hints.CommentAfter(<span class="string">"select"</span>, <span class="string">"node2"</span>)).Create(&amp;user)</span><br><span class="line"><span class="comment">// /*node2*/ INSERT INTO `users` ...;</span></span><br><span class="line"></span><br><span class="line">db.Clauses(hints.CommentAfter(<span class="string">"where"</span>, <span class="string">"hint"</span>)).Find(&amp;User{}, <span class="string">"id = ?"</span>, <span class="number">1</span>)</span><br><span class="line"><span class="comment">// SELECT * FROM `users` WHERE id = ? /* hint */</span></span><br></pre></td></tr></tbody></table></figure></body></html>              </div>
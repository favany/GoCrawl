<div class="article">            <div class="inner">              <header class="article-header">                <h1 class="article-title" itemprop="name">处理错误</h1>                                <a href="https://translate.gorm.io/project/go-gorm/zh-CN" target="_blank" rel="noopener" class="article-edit-link" title="改进此页面"><i class="fa fa-pencil"></i></a>                              </header>              <div class="article-content" itemprop="articleBody">                <html><head></head><body><p>在 Go 中，处理错误是很重要的。</p><p>我们鼓励您在调用任何 <a href="method_chaining.html#finisher_method">Finisher 方法</a> 后，都进行错误检查</p><h2 id="处理错误" class="article-heading"><a href="#处理错误" class="headerlink" title="处理错误"></a>处理错误<a class="article-anchor" href="#处理错误" aria-hidden="true"></a></h2><p>GORM 的错误处理与常见的 Go 代码不同，因为 GORM 提供的是链式 API。</p><p>如果遇到任何错误，GORM 会设置 <code>*gorm.DB</code> 的 <code>Error</code> 字段，您需要像这样检查它：</p><figure class="highlight go"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> err := db.Where(<span class="string">"name = ?"</span>, <span class="string">"jinzhu"</span>).First(&amp;user).Error; err != <span class="literal">nil</span> {</span><br><span class="line">  <span class="comment">// 处理错误...</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>或者</p><figure class="highlight go"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> result := db.Where(<span class="string">"name = ?"</span>, <span class="string">"jinzhu"</span>).First(&amp;user); result.Error != <span class="literal">nil</span> {</span><br><span class="line">  <span class="comment">// 处理错误...</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="ErrRecordNotFound" class="article-heading"><a href="#ErrRecordNotFound" class="headerlink" title="ErrRecordNotFound"></a>ErrRecordNotFound<a class="article-anchor" href="#ErrRecordNotFound" aria-hidden="true"></a></h2><p>当 <code>First</code>、<code>Last</code>、<code>Take</code> 方法找不到记录时，GORM 会返回 <code>ErrRecordNotFound</code> 错误。如果发生了多个错误，你可以通过 <code>errors.Is</code> 判断错误是否为 <code>ErrRecordNotFound</code>，例如：</p><figure class="highlight go"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// 检查错误是否为 RecordNotFound</span></span><br><span class="line">err := db.First(&amp;user, <span class="number">100</span>).Error</span><br><span class="line">errors.Is(err, gorm.ErrRecordNotFound)</span><br></pre></td></tr></tbody></table></figure><h2 id="Errors" class="article-heading"><a href="#Errors" class="headerlink" title="Errors"></a>Errors<a class="article-anchor" href="#Errors" aria-hidden="true"></a></h2><p><a href="https://github.com/go-gorm/gorm/blob/master/errors.go" target="_blank" rel="noopener">错误列表参考</a></p></body></html>              </div>